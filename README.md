# Python_RFM_project
# üìä Project Title: [RFM Segmentation]  
Author: [Linh Tran]    
Tools Used: Python  

---

## üìë Table of Contents  
1. [üìå Background & Overview](#-background--overview)  
2. [üìÇ Dataset Description & Data Structure](#-dataset-description--data-structure)  
3. [üß† Design Thinking Process](#-design-thinking-process)  
4. [üìä Key Insights & Visualizations](#-key-insights--visualizations)  
5. [üîé Final Conclusion & Recommendations](#-final-conclusion--recommendations)

---

## üìå Background & Overview  

### Objective:
- A Python-based solution for customer segmentation using the RFM (Recency, Frequency, Monetary) model.
- Objective: Automate RFM analysis to identify high-value customers, improve retention strategies, and personalize marketing campaigns efficiently.

### üë§ Who is this project for?  

‚úîÔ∏è **Retail business owners & marketers**  
‚úîÔ∏è **Data analysts & business analysts**  
‚úîÔ∏è **E-commerce managers**  
‚úîÔ∏è **CRM & customer success teams**  
‚úîÔ∏è **Decision-makers & stakeholders**

###  ‚ùì **Business Questions:**  

‚úîÔ∏è Identify loyal customers and potential high-value customers.  
‚úîÔ∏è Segment customers based on purchasing behavior to personalize marketing campaigns.  
‚úîÔ∏è Evaluate customer value (Customer Value) to optimize retention and engagement strategies.  
‚úîÔ∏è Automate the customer segmentation process instead of manual Excel calculations.  
‚úîÔ∏è Provide insightful reports to help the Marketing team implement targeted campaigns effectively.

### üéØProject Outcome:  
 
In summary, focusing on Frequency in the retail sector can provide stability and growth by fostering loyal customer relationships, improving operational efficiencies, and enhancing the overall customer experience. This approach helps build a dedicated customer base that ensures consistent revenue while also encouraging brand advocacy and community engagement.  

---

## üìÇ Dataset Description & Data Structure  

### üìå Data Source  
- Source: (Mention where the dataset is obtained from‚ÄîKaggle, company database, government sources, etc.)  
- Size: (Mention the number of rows & columns)  
- Format: (.csv, .sql, .xlsx, etc.)  

### üìä Data Structure & Relationships  

#### 1Ô∏è‚É£ Tables Used:  
Mention how many tables are in the dataset.  

#### 2Ô∏è‚É£ Table Schema & Data Snapshot  

Table 1: Products Table  

üëâüèª Insert a screenshot of table schema 

 _Example:_

| Column Name | Data Type | Description |  
|-------------|----------|-------------|  
| Product_ID  | INT      | Unique identifier for each product |  
| Name        | TEXT     | Product name |  
| Category    | TEXT     | Product category |  
| Price       | FLOAT    | Price per unit |  



Table 2: Sales Transactions  

üëâüèª Insert a screenshot of table schema 


 _Example:_

| Column Name    | Data Type | Description |  
|---------------|----------|-------------|  
| Transaction_ID | INT      | Unique identifier for each sale |  
| Product_ID     | INT      | Foreign key linking to Products table |  
| Quantity       | INT      | Number of items sold |  
| Sale_Date      | DATE     | Date of transaction |  


üìåIf the table is too big, only capture a part of it that contains key metrics you used in the projects or put the table in toggle

#### 3Ô∏è‚É£ Data Relationships:  
Describe the connections between tables‚Äîe.g., one-to-many, many-to-many.  

üëâüèª Include a screenshot of Data Modeling to visualize relationships.  

---

## üß† Design Thinking Process  

Explain the step-by-step approach taken to solve the problem.  

üëâüèª Insert a screenshot of the Design Thinking steps (Screenshot your Excel design thinking tables for better presentation).  

1Ô∏è‚É£ Empathize  
2Ô∏è‚É£ Define point of view  
3Ô∏è‚É£ Ideate  
4Ô∏è‚É£ Prototype and review  

---

## ‚öíÔ∏è Main Process

1Ô∏è‚É£ Data Cleaning & Preprocessing  
2Ô∏è‚É£ Exploratory Data Analysis (EDA)  
3Ô∏è‚É£ SQL/ Python Analysis 

- In each step, show your Code

- Include query/ code execution screenshots or result samples

- Explain its purpose and its findings


4Ô∏è‚É£ Power BI Visualization  (applicable for PBI Projects)

---

## üìä Key Insights & Visualizations  

### üîç Dashboard Preview  

#### 1Ô∏è‚É£ Dashboard 1 Preview  
üëâüèª Insert Power BI dashboard screenshots here  

üìå Analysis 1:  
- Observation: _Describe trends, key metrics, and patterns._  
- Recommendation: _Suggest actions based on insights._  

#### 2Ô∏è‚É£ Dashboard 2 Preview  
üëâüèª Insert Power BI dashboard screenshots here

üìå Analysis 2:   
- Observation: _Describe trends, key metrics, and patterns._  
- Recommendation: _Suggest actions based on insights._  

#### 3Ô∏è‚É£ Dashboard 3 Preview  
üëâüèª Insert Power BI dashboard screenshots here  

üìå Analysis 3:  
- Observation: _Describe trends, key metrics, and patterns._  
- Recommendation: _Suggest actions based on insights._  

---

## üîé Final Conclusion & Recommendations  

| Ph√¢n ƒëo·∫°n               | ƒê·∫∑c ƒëi·ªÉm                                                                                   | Khuy·∫øn ngh·ªã                                                                                          |
|-------------------------|-------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|
| **Champions**           | Mua g·∫ßn ƒë√¢y, mua th∆∞·ªùng xuy√™n v√† chi ti√™u nhi·ªÅu nh·∫•t                                    | T·∫∑ng qu√†, t·∫∑ng c√°c ch∆∞∆°ng tr√¨nh ∆∞u ƒë√£i. D√πng th·ª≠ s·∫£n ph·∫©m m·ªõi mi·ªÖn ph√≠. Khuy·∫øn kh√≠ch h·ªç qu·∫£ng b√° th∆∞∆°ng hi·ªáu. |
| **Loyal**               | Chi ti√™u kh√° nhi·ªÅu v√† mua th∆∞·ªùng xuy√™n. Ph·∫£n h·ªìi t·ªët v·ªõi c√°c ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i.     | ƒê·ªÅ xu·∫•t c√°c s·∫£n ph·∫©m gi√° tr·ªã cao h∆°n. Thu th·∫≠p ƒë√°nh gi√° v·ªÅ s·∫£n ph·∫ßm. K·∫øt n·ªëi v·ªõi h·ªç th∆∞·ªùng xuy√™n.                 |
| **Potential Loyalist**  | Kh√°ch h√†ng m·ªõi, mua nhi·ªÅu v√† mua h∆°n m·ªôt l·∫ßn.                                             | ƒê∆∞a ra c√°c ch∆∞∆°ng tr√¨nh th√†nh vi√™n/kh√°ch h√†ng trung th√†nh, gi·ªõi thi·ªáu s·∫£n ph·∫©m kh√°c.                   |
| **New Customers**       | V·ª´a m·ªõi mua, nh∆∞ng kh√¥ng th∆∞·ªùng xuy√™n.                                                    | Cung c·∫•p h·ªó tr·ª£ ban ƒë·∫ßu, gi√∫p h·ªç mua h√†ng th√†nh c√¥ng ngay t·ª´ l·∫ßn ƒë·∫ßu.               |
| **Promising**           | Ng∆∞·ªùi mua g·∫ßn ƒë√¢y, nh∆∞ng ch∆∞a chi nhi·ªÅu.                                             | X√¢y d·ª±ng nh·∫≠n di·ªán th∆∞∆°ng hi·ªáu, cung c·∫•p c√°c b·∫£n d√πng th·ª≠ mi·ªÖn ph√≠.                                  |
| **Need Attention**      | Gi√° tr·ªã Recency, Frequency v√† Monetary tr√™n trung b√¨nh, nh∆∞ng ch∆∞a mua th∆∞·ªùng xuy√™n.      | ƒê∆∞a ra c√°c ∆∞u ƒë√£i c√≥ th·ªùi h·∫°n d·ª±a tr√™n l·ªãch s·ª≠ mua h√†ng tr∆∞·ªõc ƒë√¢y. Khuy·∫øn kh√≠ch kh√°ch h√†ng mua h√†ng tr·ªü l·∫°i       |
| **About to Sleep**      | Gi√° tr·ªã Recency, Frequency v√† Monetary d∆∞·ªõi trung b√¨nh, c√≥ th·ªÉ s·∫Ω m·∫•t n·∫øu kh√¥ng k√≠ch ho·∫°t. | Gi·ªõi thi·ªáu s·∫£n ph·∫©m ph·ªï bi·∫øn ho·∫∑c ∆∞u ƒë√£i gi·∫£m gi√°. K·∫øt n·ªëi l·∫°i v·ªõi h·ªç.   |
| **At Risk**             | Chi ti√™u nhi·ªÅu v√† mua h√†ng th∆∞·ªùng xuy√™n, nh∆∞ng ƒë√£ l√¢u kh√¥ng mua.                         | G·ª≠i email, zalo OA,... c√° nh√¢n h√≥a ƒë·ªÉ t√°i k·∫øt n·ªëi, ƒë·ªÅ ngh·ªã gia h·∫°n.                    |
| **Cannot Lose Them**    | ƒê√£ mua v·ªõi s·ªë l∆∞·ª£ng l·ªõn v√† th∆∞·ªùng xuy√™n, nh∆∞ng l√¢u r·ªìi kh√¥ng quay l·∫°i.                    | Thu h√∫t l·∫°i b·∫±ng c√°c s·∫£n ph·∫©m m·ªõi ho·∫∑c gia h·∫°n, kh√¥ng ƒë·ªÉ m·∫•t kh√°ch h√†ng v√†o tay ƒë·ªëi th·ªß.                     |
| **Hibernating customers** | Mua h√†ng ƒë√£ l√¢u, √≠t chi ti√™u v√† √≠t ƒë∆°n h√†ng.                                           | ƒê·ªÅ ngh·ªã c√°c s·∫£n ph·∫©m ph√π h·ª£p kh√°c v√† ∆∞u ƒë√£i ƒë·∫∑c bi·ªát. X√¢y d·ª±ng l·∫°i gi√° tr·ªã th∆∞∆°ng hi·ªáu.             |
| **Lost customers**      | Gi√° tr·ªã Recency, Frequency v√† Monetary th·∫•p nh·∫•t.                                        | Kh∆°i g·ª£i s·ª± quan t√¢m l·∫°i b·∫±ng c√°c chi·∫øn d·ªãch ti·∫øp c·∫≠n, n·∫øu kh√¥ng c√≥ th·ªÉ b·ªè qua.                     |


üëâüèª Based on the insights and findings above, we would recommend the [stakeholder team] to consider the following:  

üìå Key Takeaways:  
‚úîÔ∏è Recommendation 1  
‚úîÔ∏è Recommendation 2  
‚úîÔ∏è Recommendation 3










# **1. EDA**
***1.1. Explore data***

***1.2. T·∫°o b·∫£ng th·ªëng k√™ ƒë∆°n h·ªßy***

![image](https://github.com/user-attachments/assets/5631a1e9-36fa-4623-bb41-3c9defa68160)

*=> S·ªë l∆∞·ª£ng ƒë∆°n b·ªã h·ªßy l√† 9288*
*T√≠nh S·ªë l∆∞·ª£ng giao d·ªãch b·ªã h·ªßy v√† t·ª∑ l·ªá ph·∫ßn trƒÉm*
```python
c1 = data['order_cancelled'].value_counts()[1]
c2 = data.shape[0]
print("Number of cancelled transactions: ", c1)
print('Percent of orders cancelled: {}/{} ({:.2f}%) '.format(c1, c2, c1/c2*100))
```
*Number of cancelled transactions:  9288*
*Percent of orders cancelled: 9288/541909 (1.71%)*

***1.3. Clean data, t·∫°o df_Transaction***
# **2. T√çNH RFM**
***2.1. T√≠nh RFM***
```python
df_rmf = df_Transaction.groupby('CustomerID').agg({'InvoiceDate': lambda x: (last_date - x.max()).days, 'InvoiceNo': lambda x: len(x), 'Revenue': lambda x: x.sum()}).reset_index()
df_rmf['InvoiceDate'] = df_rmf['InvoiceDate'].astype(int)

# Rename columns
df_rmf.rename(columns={'InvoiceDate': 'Recency',
                         'InvoiceNo': 'Frequency',
                         'Revenue': 'Monetary'}, inplace=True)
df_rmf.head()
```

![image](https://github.com/user-attachments/assets/81fd94b8-4185-4028-bda5-9e956040046b)

***2.2. T√≠nh RFM Score***
```python
# T√≠nh ƒëi·ªÉm Recency (R), Frequency (F), Monetary (M)
df_rmf['R_Score'] = pd.qcut(df_rmf['Recency'], 5, labels=[5, 4, 3, 2, 1])
df_rmf['F_Score'] = pd.qcut(df_rmf['Frequency'], 5, labels=[1, 2, 3, 4, 5])
df_rmf['M_Score'] = pd.qcut(df_rmf['Monetary'], 5, labels=[1, 2, 3, 4, 5])

# K·∫øt h·ª£p c√°c ƒëi·ªÉm df_rmf th√†nh m·ªôt chu·ªói
df_rmf['RFM_Score'] = df_rmf['R_Score'].astype(str) + df_rmf['F_Score'].astype(str) + df_rmf['M_Score'].astype(str)

# K·∫øt qu·∫£ l√† DataFrame v·ªõi c√°c c·ªôt R_Score, F_Score, M_Score, v√† df_rmf_Score
print(df_rmf[['CustomerID', 'Recency', 'Frequency', 'Monetary', 'RFM_Score']])
```
![image](https://github.com/user-attachments/assets/db0f3f2b-6c63-4a93-a697-91f6d84d77c3)

# **3. Segmentation**
```python
# T√≠nh s·ªë l∆∞·ª£ng kh√°ch h√†ng trong m·ªói segment
df_describe = df_user.groupby('Segment').agg({'CustomerID': lambda x: len(x)}).reset_index()

df_describe.rename(columns={'CustomerID': 'Count'}, inplace=True)
df_describe['percent'] = (df_describe['Count'] / df_describe['Count'].sum()) * 100
df_describe['percent'] = df_describe['percent'].round(1)

print(df_describe)
```
![image](https://github.com/user-attachments/assets/f5cb947d-934f-40ac-a0ec-fb456f93eb66)


| Ph√¢n ƒëo·∫°n               | ƒê·∫∑c ƒëi·ªÉm                                                                                   | Khuy·∫øn ngh·ªã                                                                                          |
|-------------------------|-------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|
| **Champions**           | Mua g·∫ßn ƒë√¢y, mua th∆∞·ªùng xuy√™n v√† chi ti√™u nhi·ªÅu nh·∫•t                                    | T·∫∑ng qu√†, t·∫∑ng c√°c ch∆∞∆°ng tr√¨nh ∆∞u ƒë√£i. D√πng th·ª≠ s·∫£n ph·∫©m m·ªõi mi·ªÖn ph√≠. Khuy·∫øn kh√≠ch h·ªç qu·∫£ng b√° th∆∞∆°ng hi·ªáu. |
| **Loyal**               | Chi ti√™u kh√° nhi·ªÅu v√† mua th∆∞·ªùng xuy√™n. Ph·∫£n h·ªìi t·ªët v·ªõi c√°c ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i.     | ƒê·ªÅ xu·∫•t c√°c s·∫£n ph·∫©m gi√° tr·ªã cao h∆°n. Thu th·∫≠p ƒë√°nh gi√° v·ªÅ s·∫£n ph·∫ßm. K·∫øt n·ªëi v·ªõi h·ªç th∆∞·ªùng xuy√™n.                 |
| **Potential Loyalist**  | Kh√°ch h√†ng m·ªõi, mua nhi·ªÅu v√† mua h∆°n m·ªôt l·∫ßn.                                             | ƒê∆∞a ra c√°c ch∆∞∆°ng tr√¨nh th√†nh vi√™n/kh√°ch h√†ng trung th√†nh, gi·ªõi thi·ªáu s·∫£n ph·∫©m kh√°c.                   |
| **New Customers**       | V·ª´a m·ªõi mua, nh∆∞ng kh√¥ng th∆∞·ªùng xuy√™n.                                                    | Cung c·∫•p h·ªó tr·ª£ ban ƒë·∫ßu, gi√∫p h·ªç mua h√†ng th√†nh c√¥ng ngay t·ª´ l·∫ßn ƒë·∫ßu.               |
| **Promising**           | Ng∆∞·ªùi mua g·∫ßn ƒë√¢y, nh∆∞ng ch∆∞a chi nhi·ªÅu.                                             | X√¢y d·ª±ng nh·∫≠n di·ªán th∆∞∆°ng hi·ªáu, cung c·∫•p c√°c b·∫£n d√πng th·ª≠ mi·ªÖn ph√≠.                                  |
| **Need Attention**      | Gi√° tr·ªã Recency, Frequency v√† Monetary tr√™n trung b√¨nh, nh∆∞ng ch∆∞a mua th∆∞·ªùng xuy√™n.      | ƒê∆∞a ra c√°c ∆∞u ƒë√£i c√≥ th·ªùi h·∫°n d·ª±a tr√™n l·ªãch s·ª≠ mua h√†ng tr∆∞·ªõc ƒë√¢y. Khuy·∫øn kh√≠ch kh√°ch h√†ng mua h√†ng tr·ªü l·∫°i       |
| **About to Sleep**      | Gi√° tr·ªã Recency, Frequency v√† Monetary d∆∞·ªõi trung b√¨nh, c√≥ th·ªÉ s·∫Ω m·∫•t n·∫øu kh√¥ng k√≠ch ho·∫°t. | Gi·ªõi thi·ªáu s·∫£n ph·∫©m ph·ªï bi·∫øn ho·∫∑c ∆∞u ƒë√£i gi·∫£m gi√°. K·∫øt n·ªëi l·∫°i v·ªõi h·ªç.   |
| **At Risk**             | Chi ti√™u nhi·ªÅu v√† mua h√†ng th∆∞·ªùng xuy√™n, nh∆∞ng ƒë√£ l√¢u kh√¥ng mua.                         | G·ª≠i email, zalo OA,... c√° nh√¢n h√≥a ƒë·ªÉ t√°i k·∫øt n·ªëi, ƒë·ªÅ ngh·ªã gia h·∫°n.                    |
| **Cannot Lose Them**    | ƒê√£ mua v·ªõi s·ªë l∆∞·ª£ng l·ªõn v√† th∆∞·ªùng xuy√™n, nh∆∞ng l√¢u r·ªìi kh√¥ng quay l·∫°i.                    | Thu h√∫t l·∫°i b·∫±ng c√°c s·∫£n ph·∫©m m·ªõi ho·∫∑c gia h·∫°n, kh√¥ng ƒë·ªÉ m·∫•t kh√°ch h√†ng v√†o tay ƒë·ªëi th·ªß.                     |
| **Hibernating customers** | Mua h√†ng ƒë√£ l√¢u, √≠t chi ti√™u v√† √≠t ƒë∆°n h√†ng.                                           | ƒê·ªÅ ngh·ªã c√°c s·∫£n ph·∫©m ph√π h·ª£p kh√°c v√† ∆∞u ƒë√£i ƒë·∫∑c bi·ªát. X√¢y d·ª±ng l·∫°i gi√° tr·ªã th∆∞∆°ng hi·ªáu.             |
| **Lost customers**      | Gi√° tr·ªã Recency, Frequency v√† Monetary th·∫•p nh·∫•t.                                        | Kh∆°i g·ª£i s·ª± quan t√¢m l·∫°i b·∫±ng c√°c chi·∫øn d·ªãch ti·∫øp c·∫≠n, n·∫øu kh√¥ng c√≥ th·ªÉ b·ªè qua.                     |

# **4. Visualization**
***4.1. Histogram distribution***
![image](https://github.com/user-attachments/assets/cc9f48fc-d5a4-4658-ba9f-532934804a53)

![image](https://github.com/user-attachments/assets/dc357274-95c3-4935-a8bf-12ba6a64024b)

![image](https://github.com/user-attachments/assets/bbe15893-eafd-4d4d-951e-3d3cbae5e7f8)

***4.2. Treemap***

*Treemap cho Ph√¢n Kh√∫c Kh√°ch H√†ng*
![image](https://github.com/user-attachments/assets/5ec6066b-b81e-4773-a1fc-9616b4b45944)

*Treemap cho T·ªïng Doanh Thu*
![image](https://github.com/user-attachments/assets/de8ab72f-12a0-4cd3-a410-2c132ec23807)

***4.3. Scatter plots***

![image](https://github.com/user-attachments/assets/ae887a04-d378-48a3-8123-ed9320b7822c)

![image](https://github.com/user-attachments/assets/c6c0089a-1352-45ac-a26a-49dcc62fda22)
